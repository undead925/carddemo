{"version":3,"sources":["project.js"],"names":["require","e","t","n","r","s","o","u","a","i","f","Error","code","l","exports","call","length","card","module","cc","_RFpush","Class","extends","Component","properties","setInputControl","self","this","touchevent","eventManager","addListener","event","EventListener","TOUCH_ONE_BY_ONE","onTouchBegan","touch","console","log","touchLoc","getLocation","moveToPos","node","parent","convertToNodeSpaceAR","deltax","x","position","deltay","y","width","height","turncard","onTouchMoved","onTouchEnded","removeListener","action1","scaleTo","easing","easeBackOut","action2","rotateTo","action12","spawn","action5","callFunc","children","getComponent","setVisible","isturn","action3","action4","action34","game","action6","emit","scheduleOnce","fore","off","undefined","action7","isturnall","seq","sequence","runAction","onLoad","rand","Math","floor","random","on","onturnall","_RFpop","cardPrefab","default","type","Prefab","isshuffle","deal","shuffle","onbuttonclick","getChildByName","zhqgame","isdealall","pointarray","p","cards","newCard","instantiate","addChild","setPosition","push","dealall","j","action","moveTo","easeCubicActionOut","action45","action8","action78","action10","delayTime","action9"],"mappings":"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","file":"project.js","sourcesContent":["require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"card\":[function(require,module,exports){\ncc._RFpush(module, '1b7869vvN9LbZzHQmJxN2Bi', 'card');\n// card.js\n\n'use strict';\n\ncc.Class({\n    'extends': cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n\n    setInputControl: function setInputControl() {\n        var self = this;\n        this.touchevent = cc.eventManager.addListener({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            onTouchBegan: function onTouchBegan(touch, event) {\n                console.log('cardtouch');\n                var touchLoc = touch.getLocation();\n                self.moveToPos = self.node.parent.convertToNodeSpaceAR(touchLoc);\n                var deltax = self.moveToPos.x - self.node.position.x;\n                var deltay = self.moveToPos.y - self.node.position.y;\n                if (deltax >= -(self.node.width / 2) && deltax <= self.node.width / 2 && deltay >= -(self.node.height / 2) && deltay <= self.node.height / 2) {\n                    self.turncard();\n                }\n                return true; // don't capture event\n            },\n            onTouchMoved: function onTouchMoved(touch, event) {},\n            onTouchEnded: function onTouchEnded(touch, event) {}\n        }, self.node);\n    },\n\n    turncard: function turncard(event) {\n        console.log('turn');\n        // if(!this.isturn){\n        cc.eventManager.removeListener(this.touchevent);\n        // this.node.parent.off('turnall',this.turncard,this);\n        var action1 = cc.scaleTo(0.1, 0, 1).easing(cc.easeBackOut());\n        var action2 = cc.rotateTo(0.1, 50).easing(cc.easeBackOut());\n        var action12 = cc.spawn(action1, action2); //一起摇摆~\n\n        var action5 = cc.callFunc(function () {\n            this.node.children[4].getComponent('cc.Sprite').setVisible(this.isturn);\n            this.isturn = !this.isturn;\n        }, this);\n\n        var action3 = cc.scaleTo(0.1, 1, 1).easing(cc.easeBackOut());\n        var action4 = cc.rotateTo(0.1, 0).easing(cc.easeBackOut());\n        var action34 = cc.spawn(action3, action4); //一起摇摆~\n\n        var game = this.node.parent.getComponent('game');\n        var action6 = cc.callFunc(function () {\n            // game.turnall();\n            if (event) {\n                this.node.emit('turnall');\n                // this.scheduleOnce(function() {\n                // // 这里的 this 指向 component\n                //     game.isturnall = true;\n                // },1);\n            } else {\n                    this.scheduleOnce(function () {\n                        // 这里的 this 指向 component\n                        this.node.emit('turnall');\n                    }, 1);\n                }\n            this.node.fore.off('turnall', this.turncard, this);\n            this.node.fore = undefined;\n            console.log('offturnall');\n        }, this);\n\n        var action7 = cc.callFunc(function () {\n            // game.turnall();\n            if (event) {\n                console.log('turnallfinish');\n                game.isturnall = true;\n            } else {\n                console.log('turnfinish');\n            }\n        }, this);\n\n        var seq = cc.sequence(action6, action12, action5, action34, action7);\n\n        this.node.runAction(seq);\n        // }\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.isturn = true;\n        this.rand = this.rand || Math.floor(Math.random() * 4);\n        this.node.parent.on('dealall', this.setInputControl, this);\n        // this.node.parent.on('turnall',this.turncard,this);\n        console.log(this.rand);\n        for (var i = 0, l = this.node.children.length - 1; i < l; i++) {\n            this.node.children[i].getComponent('cc.Sprite').setVisible(false);\n        }\n        this.node.children[this.rand].getComponent('cc.Sprite').setVisible(true);\n        this.node.children[4].getComponent('cc.Sprite').setVisible(false);\n    },\n\n    onturnall: function onturnall() {\n        console.log('onturnall');\n        this.node.fore.on('turnall', this.turncard, this);\n    }\n\n});\n// called every frame, uncomment this function to activate update callback\n// update: function (dt) {\n\n// },\n\ncc._RFpop();\n},{}],\"game\":[function(require,module,exports){\ncc._RFpush(module, 'ecbfeCSQf5Ma6xEsD85lDKb', 'game');\n// game.js\n\n\"use strict\";\n\ncc.Class({\n    \"extends\": cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        cardPrefab: {\n            \"default\": null,\n            type: cc.Prefab\n        }\n    },\n\n    setInputControl: function setInputControl() {\n        var self = this;\n        this.touchevent = cc.eventManager.addListener({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            onTouchBegan: function onTouchBegan(touch, event) {\n\n                console.log(self.isturnall + \" \" + self.isshuffle);\n                if (self.isshuffle) {\n                    self.isturnall = false;\n                    self.isshuffle = false;\n                    self.onturnall();\n                    self.deal(0);\n                } else if (self.isturnall) {\n                    self.shuffle();\n                }\n\n                return true; // don't capture event\n            },\n            onTouchMoved: function onTouchMoved(touch, event) {},\n            onTouchEnded: function onTouchEnded(touch, event) {}\n        }, self.node);\n    },\n\n    onbuttonclick: function onbuttonclick() {\n        console.log(this.isturnall + \" \" + this.isshuffle);\n        if (this.isturnall && !this.isshuffle) {\n            this.shuffle();\n            this.node.getChildByName('button1').getComponent('cc.Sprite').setVisible(false);\n        }\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        zhqgame = this;\n        this.isturnall = true;\n        this.isshuffle = false;\n        this.isdealall = 0;\n\n        this.pointarray = [];\n        this.pointarray[0] = cc.p(-this.node.width / 3, this.node.height / 3);\n        this.pointarray[1] = cc.p(0, this.node.height / 3);\n        this.pointarray[2] = cc.p(this.node.width / 3, this.node.height / 3);\n        this.pointarray[3] = cc.p(-this.node.width / 3, 0);\n        this.pointarray[4] = cc.p(this.node.width / 3, 0);\n        this.pointarray[5] = cc.p(-this.node.width / 3, -this.node.height / 3);\n        this.pointarray[6] = cc.p(0, -this.node.height / 3);\n        this.pointarray[7] = cc.p(this.node.width / 3, -this.node.height / 3);\n\n        this.cards = [];\n        for (var i = 0; i < 8; i++) {\n            var newCard = cc.instantiate(this.cardPrefab);\n            this.node.addChild(newCard);\n            // newCard onLoad\n\n            newCard.setPosition(this.pointarray[i]);\n            this.cards.push(newCard);\n        }\n\n        this.node.on(\"shuffle\", this.dealall, this);\n\n        // this.onturnall();\n\n        // this.deal(0);\n        // this.setInputControl();\n        // cc.eventManager.removeListener(this.touchevent);\n    },\n\n    onturnall: function onturnall() {\n        this.isturnall = false;\n        for (var j = 0; j < 8; j++) {\n            if (j == 7) {\n                this.cards[0].fore = this.cards[7];\n                this.cards[0].getComponent('card').onturnall();\n            } else {\n                this.cards[j + 1].fore = this.cards[j];\n                this.cards[j + 1].getComponent('card').onturnall();\n            }\n        }\n    },\n\n    deal: function deal(i) {\n        var action = cc.moveTo(0.2, this.pointarray[i]).easing(cc.easeCubicActionOut());\n        var action2;\n        if (i < this.cards.length - 1) {\n            action2 = cc.callFunc(function () {\n                this.deal(i + 1);\n            }, this);\n        } else {\n            action2 = cc.callFunc(function () {\n                console.log(\"dealall\");\n                this.node.emit(\"dealall\");\n            }, this);\n        }\n\n        var seq = cc.sequence(action, action2);\n\n        this.cards[i].runAction(seq);\n    },\n\n    dealall: function dealall() {\n        console.log('dealall');\n        this.isdealall++;\n        if (this.isdealall >= this.cards.length) {\n            this.isdealall = true;\n            this.isturnall = false;\n            this.isshuffle = false;\n            this.onturnall();\n            this.node.getChildByName('button1').getComponent('cc.Sprite').setVisible(true);\n            this.deal(0);\n        }\n    },\n\n    // turnall: function () {\n    //     console.log('isturnall');\n    //     if(!this.isturnall){\n    //         console.log('turnall');\n    //         this.scheduleOnce(function() {\n    //         // 这里的 this 指向 component\n    //             this.isturnall = true;\n    //             this.node.emit('turnall');\n    //         },1);\n    //     }\n    // },\n\n    shuffle: function shuffle() {\n        for (var i = 0, l = this.cards.length; i < l; i++) {\n            var action = cc.moveTo(0.3, cc.p(10 * i - 35, 0)).easing(cc.easeCubicActionOut());\n            var action2, action3;\n            if (i < 4) {\n                action2 = cc.moveTo((2 + i) / 10, cc.p(-60, 0)).easing(cc.easeBackOut());\n                action3 = cc.moveTo((8 - i) / 10, cc.p(10 * i - 35, 0)).easing(cc.easeBackOut());\n            } else {\n                action2 = cc.moveTo((9 - i) / 10, cc.p(60, 0)).easing(cc.easeBackOut());\n                action3 = cc.moveTo((i + 1) / 10, cc.p(10 * i - 35, 0)).easing(cc.easeBackOut());\n            }\n\n            var action4 = cc.scaleTo(0.2 + 0.05 * i, 0, 1).easing(cc.easeBackOut());\n            var action5 = cc.rotateTo(0.2 + 0.05 * i, 50).easing(cc.easeBackOut());\n            var action45 = cc.spawn(action4, action5); //一起摇摆~\n\n            var action6 = cc.callFunc(function () {\n                this.node.children[4].getComponent('cc.Sprite').setVisible(this.isturn);\n                this.isturn = !this.isturn;\n            }, this.cards[i].getComponent('card'));\n\n            var action7 = cc.scaleTo(0.2 + 0.05 * i, 1, 1).easing(cc.easeBackOut());\n            var action8 = cc.rotateTo(0.2 + 0.05 * i, 0).easing(cc.easeBackOut());\n            var action78 = cc.spawn(action7, action8); //一起摇摆~\n\n            var action10 = cc.delayTime(0.7 - 0.1 * i);\n\n            var action9 = cc.callFunc(function () {\n                // this.isshuffle = true;\n                // this.isturnall = true;\n                this.node.emit('shuffle');\n            }, this);\n\n            var seq = cc.sequence(action, action2, action3, action45, action6, action78, action10, action2, action3, action9);\n\n            this.cards[i].runAction(seq);\n        }\n        // this.scheduleOnce(function() {\n        //     // 这里的 this 指向 component\n        //         this.isshuffle = true;\n        //         this.isturnall = true;\n        // },2);\n        this.isturnall = false;\n    }\n\n});\n// called every frame, uncomment this function to activate update callback\n// update: function (dt) {\n\n// },\n\ncc._RFpop();\n},{}]},{},[\"card\",\"game\"]);\n"],"sourceRoot":"/source/"}